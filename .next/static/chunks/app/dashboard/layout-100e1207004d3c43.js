(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[954],{63:(e,t,s)=>{"use strict";var r=s(7260);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},3650:(e,t,s)=>{"use strict";s.d(t,{DashboardNav:()=>c});var r=s(5155),n=s(2619),a=s.n(n),l=s(63),i=s(6648);let o=[{href:"/dashboard",label:"Home"},{href:"/sports",label:"Sports"},{href:"/live",label:"Live"},{href:"/jackpots",label:"Jackpots"},{href:"/dashboard/bets",label:"My Bets"},{href:"/dashboard/transactions",label:"Transactions"},{href:"/dashboard/profile",label:"Profile"}];function c(e){let{user:t}=e,s=(0,l.usePathname)(),n=(0,l.useRouter)(),c=(0,i.U)();async function d(){await c.auth.signOut(),n.push("/"),n.refresh()}return(0,r.jsxs)("nav",{className:"w-56 bg-apex-card border-r border-apex-muted flex flex-col",children:[(0,r.jsx)("div",{className:"p-4 border-b border-apex-muted",children:(0,r.jsx)(a(),{href:"/",className:"text-xl font-bold text-apex-primary",children:"ApexBet"})}),(0,r.jsx)("ul",{className:"flex-1 p-2 space-y-1",children:o.map(e=>(0,r.jsx)("li",{children:(0,r.jsx)(a(),{href:e.href,className:function(){for(var e,t,s=0,r="",n=arguments.length;s<n;s++)(e=arguments[s])&&(t=function e(t){var s,r,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t)if(Array.isArray(t)){var a=t.length;for(s=0;s<a;s++)t[s]&&(r=e(t[s]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}(e))&&(r&&(r+=" "),r+=t);return r}("block px-3 py-2 rounded-lg text-sm",s===e.href?"bg-apex-primary/20 text-apex-primary":"text-gray-300 hover:bg-apex-muted"),children:e.label})},e.href))}),(0,r.jsxs)("div",{className:"p-2 border-t border-apex-muted",children:[(0,r.jsx)("p",{className:"px-3 py-1 text-xs text-gray-500 truncate",children:t.email}),(0,r.jsx)("button",{onClick:d,className:"w-full mt-2 px-3 py-2 text-left text-sm text-red-400 hover:bg-apex-muted rounded-lg",children:"Sign out"})]})]})}},4280:(e,t,s)=>{"use strict";s.d(t,{S:()=>r});let r=(0,s(5959).v)((e,t)=>({selections:[],addSelection:t=>e(e=>e.selections.some(e=>e.selectionId===t.selectionId)?e:{selections:[...e.selections,t]}),removeSelection:t=>e(e=>({selections:e.selections.filter(e=>e.selectionId!==t)})),clearSlip:()=>e({selections:[]}),hasSelection:e=>t().selections.some(t=>t.selectionId===e)}))},4957:(e,t,s)=>{"use strict";s.d(t,{BetSlipSidebar:()=>j});var r=s(5155),n=s(4280),a=s(2115),l=s(296),i=s(4416),o=s(9686),c=s(3127);class d extends a.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function u(e){let{children:t,isPresent:s}=e,n=(0,a.useId)(),l=(0,a.useRef)(null),i=(0,a.useRef)({width:0,height:0,top:0,left:0}),{nonce:o}=(0,a.useContext)(c.Q);return(0,a.useInsertionEffect)(()=>{let{width:e,height:t,top:r,left:a}=i.current;if(s||!l.current||!e||!t)return;l.current.dataset.motionPopId=n;let c=document.createElement("style");return o&&(c.nonce=o),document.head.appendChild(c),c.sheet&&c.sheet.insertRule('\n          [data-motion-pop-id="'.concat(n,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(r,"px !important;\n            left: ").concat(a,"px !important;\n          }\n        ")),()=>{document.head.removeChild(c)}},[s]),(0,r.jsx)(d,{isPresent:s,childRef:l,sizeRef:i,children:a.cloneElement(t,{ref:l})})}let p=e=>{let{children:t,initial:s,isPresent:n,onExitComplete:l,custom:c,presenceAffectsLayout:d,mode:p}=e,m=(0,i.M)(h),f=(0,a.useId)(),x=(0,a.useCallback)(e=>{for(let t of(m.set(e,!0),m.values()))if(!t)return;l&&l()},[m,l]),b=(0,a.useMemo)(()=>({id:f,initial:s,isPresent:n,custom:c,onExitComplete:x,register:e=>(m.set(e,!1),()=>m.delete(e))}),d?[Math.random(),x]:[n,x]);return(0,a.useMemo)(()=>{m.forEach((e,t)=>m.set(t,!1))},[n]),a.useEffect(()=>{n||m.size||!l||l()},[n]),"popLayout"===p&&(t=(0,r.jsx)(u,{isPresent:n,children:t})),(0,r.jsx)(o.t.Provider,{value:b,children:t})};function h(){return new Map}var m=s(5601);let f=e=>e.key||"";function x(e){let t=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&t.push(e)}),t}var b=s(6553);let y=e=>{let{children:t,custom:s,initial:n=!0,onExitComplete:o,presenceAffectsLayout:c=!0,mode:d="sync",propagate:u=!1}=e,[h,y]=(0,m.xQ)(u),g=(0,a.useMemo)(()=>x(t),[t]),v=u&&!h?[]:g.map(f),j=(0,a.useRef)(!0),N=(0,a.useRef)(g),S=(0,i.M)(()=>new Map),[w,_]=(0,a.useState)(g),[P,k]=(0,a.useState)(g);(0,b.E)(()=>{j.current=!1,N.current=g;for(let e=0;e<P.length;e++){let t=f(P[e]);v.includes(t)?S.delete(t):!0!==S.get(t)&&S.set(t,!1)}},[P,v.length,v.join("-")]);let E=[];if(g!==w){let e=[...g];for(let t=0;t<P.length;t++){let s=P[t],r=f(s);v.includes(r)||(e.splice(t,0,s),E.push(s))}"wait"===d&&E.length&&(e=E),k(x(e)),_(g);return}let{forceRender:C}=(0,a.useContext)(l.L);return(0,r.jsx)(r.Fragment,{children:P.map(e=>{let t=f(e),a=(!u||!!h)&&(g===P||v.includes(t));return(0,r.jsx)(p,{isPresent:a,initial:(!j.current||!!n)&&void 0,custom:a?void 0:s,presenceAffectsLayout:c,mode:d,onExitComplete:a?void 0:()=>{if(!S.has(t))return;S.set(t,!0);let e=!0;S.forEach(t=>{t||(e=!1)}),e&&(null==C||C(),k(N.current),u&&(null==y||y()),o&&o())},children:e},t)})})};var g=s(4486),v=s(6648);function j(){let{selections:e,removeSelection:t,clearSlip:s}=(0,n.S)(),[l,i]=(0,a.useState)(""),[o,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(null),p=(0,v.U)(),h=e.length?e.reduce((e,t)=>e*t.odds,1):0,m=parseFloat(l)||0,f=h*m;async function x(){if(0===e.length||m<10)return void u("Add selections and stake (min KES 10)");c(!0),u(null);try{let{data:{user:t}}=await p.auth.getUser();if(!t)return void u("Please log in.");let r=e.map(e=>({selection_id:e.selectionId,event_id:e.eventId,odds:e.odds})),{data:n,error:a}=await p.rpc("place_bet_slip",{p_user_id:t.id,p_total_stake_kes:m,p_selections_json:r});if(a)return void u(a.message);s(),i(""),u("Bet placed successfully.")}finally{c(!1)}}return(0,r.jsxs)("aside",{className:"w-80 border-l border-apex-muted bg-apex-card flex flex-col max-h-screen overflow-hidden hidden lg:flex",children:[(0,r.jsx)("div",{className:"p-3 border-b border-apex-muted",children:(0,r.jsx)("h2",{className:"font-semibold text-white",children:"Bet slip"})}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto p-3",children:(0,r.jsx)(y,{mode:"popLayout",children:0===e.length?(0,r.jsx)(g.P.p,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-gray-500 text-sm",children:"Add selections from events to your slip."},"empty"):e.map(e=>(0,r.jsxs)(g.P.div,{layout:!0,initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,x:-20},className:"mb-2 p-2 bg-apex-muted/50 rounded-lg text-sm",children:[(0,r.jsx)("p",{className:"text-gray-300 truncate",children:e.eventName}),(0,r.jsxs)("p",{className:"text-apex-primary font-medium",children:[e.selectionName," @ ",e.odds]}),(0,r.jsx)("button",{type:"button",onClick:()=>t(e.selectionId),className:"text-red-400 text-xs hover:underline mt-1",children:"Remove"})]},e.selectionId))})}),e.length>0&&(0,r.jsxs)("div",{className:"p-3 border-t border-apex-muted space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-400",children:"Total odds"}),(0,r.jsx)("span",{className:"text-white font-medium",children:h.toFixed(2)})]}),(0,r.jsx)("input",{type:"number",min:10,step:10,placeholder:"Stake (KES)",value:l,onChange:e=>i(e.target.value),className:"w-full bg-apex-muted border border-apex-primary/30 rounded-lg px-3 py-2 text-white"}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-400",children:"Potential win"}),(0,r.jsxs)("span",{className:"text-apex-primary font-medium",children:["KES ",f.toLocaleString()]})]}),d&&(0,r.jsx)("p",{className:"text-sm text-amber-400",children:d}),(0,r.jsx)("button",{type:"button",onClick:x,disabled:o||m<10,className:"w-full btn-primary py-2 rounded-lg disabled:opacity-50",children:o?"Placing...":"Place bet"})]})]})}},5959:(e,t,s)=>{"use strict";s.d(t,{v:()=>l});var r=s(2115);let n=e=>{let t,s=new Set,r=(e,r)=>{let n="function"==typeof e?e(t):e;if(!Object.is(n,t)){let e=t;t=(null!=r?r:"object"!=typeof n||null===n)?n:Object.assign({},t,n),s.forEach(s=>s(t,e))}},n=()=>t,a={setState:r,getState:n,getInitialState:()=>l,subscribe:e=>(s.add(e),()=>s.delete(e))},l=t=e(r,n,a);return a},a=e=>{let t=(e=>e?n(e):n)(e),s=e=>(function(e,t=e=>e){let s=r.useSyncExternalStore(e.subscribe,r.useCallback(()=>t(e.getState()),[e,t]),r.useCallback(()=>t(e.getInitialState()),[e,t]));return r.useDebugValue(s),s})(t,e);return Object.assign(s,t),s},l=e=>e?a(e):a},6263:(e,t,s)=>{Promise.resolve().then(s.bind(s,4957)),Promise.resolve().then(s.bind(s,3650))},6648:(e,t,s)=>{"use strict";s.d(t,{U:()=>n});var r=s(5417);function n(){return(0,r.createBrowserClient)("your_supabase_url","your_supabase_anon_key")}}},e=>{e.O(0,[619,417,486,441,255,358],()=>e(e.s=6263)),_N_E=e.O()}]);